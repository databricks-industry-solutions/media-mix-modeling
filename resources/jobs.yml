resources:
  jobs:
    mmm_example:
      name: "[${bundle.target}] MMM Example"

      tasks:
        - task_key: generate_data
          job_cluster_key: main_cluster
          notebook_task:
            notebook_path: ../generate_data.py
          libraries:
            - requirements: ../requirements.txt

        - task_key: fit_model
          depends_on:
            - task_key: generate_data
          job_cluster_key: main_cluster
          notebook_task:
            notebook_path: ../fit_model.py
          libraries:
            - requirements: ../requirements.txt

      job_clusters:
        - job_cluster_key: main_cluster
          new_cluster:
            spark_version: 16.4.x-scala2.12
            node_type_id: i3.xlarge
            num_workers: 2

      schedule:
        quartz_cron_expression: "0 0 2 * * ?"
        timezone_id: "UTC"
        pause_status: PAUSED

      email_notifications:
        on_failure:
          - ${workspace.current_user.userName}

      max_concurrent_runs: 1
